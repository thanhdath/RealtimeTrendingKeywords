
from wordcloud import WordCloud
import matplotlib.pyplot as plt

trending_record = {
  "_index": "trending_day",
  "_type": "trending_day",
  "_id": "1626048000.0",
  "_version": 1,
  "_score": 2,
  "_source": {
    "trending_keywords": [
      "covid-19",
      "tp",
      "việt nam",
      "trung quốc",
      "hcm",
      "đồng",
      "usd",
      "italy",
      "mỹ",
      "cổ phiếu",
      "euro",
      "hà nội",
      "công ty",
      "vaccine",
      "ca",
      "thị trường",
      "y tế",
      "giá",
      "phiên",
      "tiền",
      "chương",
      "ảnh",
      "xe",
      "trận",
      "thành phố",
      "chung kết",
      "tỉnh",
      "bệnh viện",
      "chứng khoán",
      "bitcoin",
      "khoản",
      "haiti",
      "chợ",
      "cầu thủ",
      "đầu",
      "ncov",
      "thép",
      "lợi nhuận",
      "doanh nghiệp",
      "điện",
      "vô địch",
      "hàng",
      "hệ thống",
      "vinfast",
      "giải",
      "chỉ thị",
      "kết quả",
      "chốt",
      "gia đình",
      "thủ tướng",
      "ubnd",
      "sở",
      "sân",
      "f1",
      "tổng thống",
      "quỹ",
      "chủ tịch",
      "tập đoàn",
      "đường",
      "khu",
      "chính phủ",
      "sản phẩm",
      "rau",
      "tỷ phú",
      "dân",
      "đồng nai",
      "hlv",
      "đáy",
      "ấn độ",
      "sàn",
      "tàu",
      "kế hoạch",
      "doanh thu",
      "câu",
      "đáp án",
      "không gian",
      "bonucci",
      "afp",
      "wembley",
      "vốn",
      "đức",
      "bắc kinh",
      "vn-index",
      "công nghệ",
      "mã",
      "cuba",
      "gan",
      "elon musk",
      "f0",
      "lít",
      "que diêm",
      "thế giới",
      "xã hội",
      "tỷ lệ",
      "biển đông",
      "kinh tế",
      "hôm",
      "close",
      "chuyến",
      "khách hàng"
    ],
    "keywords_rank_scores": [
      0.05001882935526368,
      0.04188016686019939,
      0.04077532870099657,
      0.038033020567610085,
      0.0355933373941283,
      0.035407999423980686,
      0.03260397228606341,
      0.02935669341975033,
      0.026368858822706218,
      0.025554769302201925,
      0.0237503451040832,
      0.02097725310223174,
      0.020455570585079182,
      0.017950943233841044,
      0.017939959818469287,
      0.017536055875779267,
      0.017035027873957883,
      0.01685414462592226,
      0.01508736380344834,
      0.014280789077917565,
      0.013160388119750437,
      0.012912520833529671,
      0.011530067859774425,
      0.011508324416711957,
      0.011148907334446434,
      0.01031908832721903,
      0.009801247960339049,
      0.009235526319687843,
      0.008482708910711505,
      0.008421913897013042,
      0.008247323723141641,
      0.008100733140039597,
      0.007957861940579368,
      0.007873187905767763,
      0.007864885579331462,
      0.007862009426748863,
      0.0077887452128251175,
      0.007761564157109654,
      0.007595461353303808,
      0.007463487193571349,
      0.00745271342864351,
      0.007420553225728161,
      0.007237635233149125,
      0.007224146503910242,
      0.007210858003733795,
      0.0071286337015231994,
      0.007115754612761668,
      0.007073284727025009,
      0.007007581152359632,
      0.006995635921132738,
      0.0069645030352577806,
      0.006943487688499637,
      0.0068888575462890565,
      0.006817971024279423,
      0.006759610116593565,
      0.006701379234651169,
      0.006695783091389592,
      0.006675517227378622,
      0.006647601002340491,
      0.006645556195995916,
      0.006620078116080237,
      0.006591607195144562,
      0.0065433361804892055,
      0.00645778779258707,
      0.006420708709975503,
      0.006332175993281716,
      0.006286060917537027,
      0.006262430768832381,
      0.0062295768833625495,
      0.006212842133360517,
      0.006199437842677388,
      0.006104173317185434,
      0.006062678679625338,
      0.006054639569792524,
      0.006010381174107741,
      0.0058731021631163735,
      0.00585764978383385,
      0.005828272682865367,
      0.005781494336516766,
      0.005742324608607697,
      0.005638578216604283,
      0.00563390155783228,
      0.0056314860065888855,
      0.0055347226634881825,
      0.005517701712269487,
      0.005510949448877963,
      0.005509138247270826,
      0.005495491995882461,
      0.005492468120289813,
      0.005467315823402854,
      0.00541179110626867,
      0.0054023397965626664,
      0.005387196490133857,
      0.005372646739848289,
      0.005366480663330195,
      0.0053392150945685765,
      0.005250647900236767,
      0.005234075512990613,
      0.005225436621826278,
      0.005194887094035318
    ],
    "time": "2021/07/12",
    "article_source": "all",
    "extracted_timestamp": 1626048000,
    "extracted_time": "2021/07/12 00:00:00",
    "n_articles": 335
  },
  "fields": {
    "extracted_time": [
      "2021-07-12T00:00:00.000Z"
    ],
    "time": [
      "2021-07-12T00:00:00.000Z"
    ]
  }
}
freq = {w: f for w, f in zip(
    trending_record['_source']['trending_keywords'], 
    trending_record['_source']['keywords_rank_scores'])}

wordcloud = WordCloud(
    width=1000,
    height=500, 
    background_color='white',
max_words=100,
# relative_scaling=1,normalize_plurals=False
).generate_from_frequencies(freq)

plt.figure( figsize=(20,10), facecolor='k')
plt.imshow(wordcloud)
plt.axis("off")
plt.tight_layout(pad=0)

# plt.show()
plt.savefig('trending-24h-8-10-2021-14h.png')
