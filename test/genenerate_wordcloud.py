
from wordcloud import WordCloud
import matplotlib.pyplot as plt

trending_record = {
  "_index": "trending_24h",
  "_type": "trending_24h",
  "_id": "1633677663.630392",
  "_version": 1,
  "_score": 2,
  "_source": {
    "trending_keywords": [
      "việt nam",
      "trung quốc",
      "usd",
      "covid-19",
      "cổ phiếu",
      "đồng",
      "thị trường",
      "tp",
      "dự án",
      "hà nội",
      "công ty",
      "mỹ",
      "doanh nghiệp",
      "tiền",
      "hcm",
      "bđs",
      "ngân hàng",
      "giá",
      "hlv",
      "vốn",
      "tỉnh",
      "đất",
      "ngành",
      "đt",
      "nhà đầu tư",
      "hàn quốc",
      "ubnd",
      "tài chính",
      "phiên",
      "trận",
      "nhu cầu",
      "tphcm",
      "kinh tế",
      "quý",
      "bất động sản",
      "địa phương",
      "sở",
      "y tế",
      "ctcp",
      "khoản",
      "cổ tức",
      "sản phẩm",
      "khu",
      "nhật bản",
      "tỷ lệ",
      "lĩnh vực",
      "quỹ",
      "kế hoạch",
      "dn",
      "thuế",
      "dân",
      "khách hàng",
      "đường",
      "park hang-seo",
      "chính phủ",
      "cổ phần",
      "lợi nhuận",
      "kết quả",
      "giải pháp",
      "đà nẵng",
      "xã hội",
      "đầu",
      "chủ tịch",
      "tập đoàn",
      "lao động",
      "công việc",
      "công nghệ",
      "squid game",
      "xe",
      "cầu thủ",
      "chất béo",
      "cơ sở",
      "vaccine",
      "thịt",
      "chi phí",
      "gạo",
      "kỳ",
      "bệnh",
      "đợt",
      "cổ đông",
      "bệnh nhân",
      "quy định",
      "thuốc",
      "quyền",
      "dịch",
      "australia",
      "lương",
      "chủ",
      "nợ",
      "doanh thu",
      "trái phiếu",
      "đô thị",
      "xu hướng",
      "sốt rét",
      "mũi",
      "hợp đồng",
      "cp",
      "nga",
      "thành phố",
      "mức độ"
    ],
    "keywords_rank_scores": [
      0.09419856776697001,
      0.05379582616285596,
      0.0383314252534968,
      0.03714868828672038,
      0.035377122331724915,
      0.03182858305847377,
      0.026316512548362314,
      0.026135892428250655,
      0.024144166906661522,
      0.023541571107274534,
      0.022542856287532595,
      0.022150602022336402,
      0.02031405100695218,
      0.018357893769819687,
      0.016772016935437613,
      0.016704116924759364,
      0.016279122251407017,
      0.015587882152985368,
      0.015390287825820954,
      0.015296435354302466,
      0.013697744705713409,
      0.013504165143773861,
      0.012093456931360567,
      0.01200795311899193,
      0.011965236368150863,
      0.011845703746691652,
      0.011567469456623247,
      0.011136801548060838,
      0.010864731660211535,
      0.010798430663686107,
      0.010661348225576682,
      0.010638564769825349,
      0.010548347634324363,
      0.010473636464302568,
      0.010404350223976046,
      0.010361252947453365,
      0.010272157855821633,
      0.010184897730381918,
      0.009901246803421467,
      0.009854526193110603,
      0.00983286732060335,
      0.009786204271441676,
      0.009726625543927898,
      0.009617660046660424,
      0.009482086744507519,
      0.00911937059948307,
      0.009040954844102648,
      0.008681752122471234,
      0.008271380548477298,
      0.008028066532580888,
      0.007724485430371078,
      0.007712607945848809,
      0.007676753465195934,
      0.007605370696862492,
      0.007548680577352811,
      0.007475801602240213,
      0.007379869264873226,
      0.007326255281828692,
      0.007265189052904916,
      0.007218992848598123,
      0.007145505449215318,
      0.007044290474601749,
      0.007019398906789836,
      0.006987170280597785,
      0.006985847809184005,
      0.006976052171798608,
      0.00697059836171378,
      0.006938276854717453,
      0.00687655013826094,
      0.006777169290808879,
      0.006759423944752832,
      0.006641598012683208,
      0.006624308117250883,
      0.006595308890265806,
      0.006554200266493844,
      0.006553399647273436,
      0.006428719210953473,
      0.006417173306532667,
      0.006416217450014701,
      0.0064098255065529654,
      0.006343393007448748,
      0.006268575552900409,
      0.00614201783832405,
      0.006095533299152229,
      0.006079350177620388,
      0.006060350311209802,
      0.00605029720911242,
      0.0060196402743110744,
      0.005989593365279159,
      0.005974312062666239,
      0.0059396033179728745,
      0.005873118175706619,
      0.005865644722666245,
      0.005809212582644449,
      0.005805264696037058,
      0.005710687646020319,
      0.005697909614151186,
      0.005689894839431153,
      0.005617399147181216,
      0.00560932604124032
    ],
    "time": "2021/10/08 07:21:03",
    "article_source": "all",
    "extracted_timestamp": 1633677663.630392,
    "extracted_time": "2021/10/08 07:21:03",
    "n_articles": 752
  },
  "fields": {
    "extracted_time": [
      "2021-10-08T07:21:03.000Z"
    ],
    "time": [
      "2021-10-08T07:21:03.000Z"
    ]
  }
}
freq = {w: f for w, f in zip(
    trending_record['_source']['trending_keywords'], 
    trending_record['_source']['keywords_rank_scores'])}

wordcloud = WordCloud(
    width=1000,
    height=500, 
    background_color='white',
max_words=100,
# relative_scaling=1,normalize_plurals=False
).generate_from_frequencies(freq)

plt.figure( figsize=(20,10), facecolor='k')
plt.imshow(wordcloud)
plt.axis("off")
plt.tight_layout(pad=0)

# plt.show()
plt.savefig('trending-24h-8-10-2021-14h.png')
